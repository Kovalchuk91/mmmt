{% extends 'layouts/index.njk' %}

{% set previousPost = collections.movies | getPreviousCollectionItem(page) %}
{% set nextPost = collections.movies | getNextCollectionItem(page) %}

{% block title %}{{ title }} | {{ super() }}{% endblock %}

{% block content %}
    <article class="movie">
        <h1 class="movie-title">{{ title }}</h1>

        <div class="movie-info">
            {{ date | formatdate('MM/dd/yyyy') }} &middot; {{ content | striptags | wordcount | readtime }} min read
        </div>

        <div class="movie-epigraph">
            {{ epigraph | nl2br | safe }}
        </div>

        <div>
            {{ content | safe }}

            <div class="movie-navigation">
                <div>
                    {% if previousPost %}
                        <a href="{{ previousPost.url }}" class="movie-navigation-prev movie-navigation-item">
                            <div class="movie-navigation-item-dir">&larr; Prev</div>
                            {{ previousPost.data.title }}
                        </a>
                    {% endif %}
                </div>

                <div>
                    {% if nextPost %}
                        <a href="{{ nextPost.url }}" class="movie-navigation-next movie-navigation-item">
                            <div class="movie-navigation-item-dir">Next &rarr;</div>
                            {{ nextPost.data.title }}
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </article>
{% endblock %}